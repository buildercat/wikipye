import httplib2,time
from BeautifulSoup import BeautifulSoup, SoupStrainer

http = httplib2.Http()
f = open('database.txt','r+')
firstLinks = f.readlines()

for x in range(len(firstLinks)):
    firstLinks[x] = firstLinks[x][:-2]

def firstlevel (firstLinks,x):
    status, response = http.request('https://en.wikipedia.org' + x)
    print response
    y = 0
    for link in BeautifulSoup(response, parseOnlyThese=SoupStrainer('a')):
        if link.has_key('href'):
            if link['href'].startswith('/wiki/'):
                y += 1
                if y == 6:
                    newLink = link['href']
                    print newLink
                    #return newLink
                    nextlevel(newLink)

def nextlevel (newLink):
    status, response = http.request(x)
    y = 0
    for link in BeautifulSoup(response, parseOnlyThese=SoupStrainer('a')):
        if link.has_key('href'):
            if link['href'].startswith('/wiki/'):
                y += 1
                if y == 6:
                    newLink = link['href']
                    print newLink
                    # return newLink
                    nextlevel(newLink)

for x in firstLinks:
    firstlevel(firstLinks,x)
    
